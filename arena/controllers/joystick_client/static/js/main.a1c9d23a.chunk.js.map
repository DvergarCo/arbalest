{"version":3,"sources":["Joystick.js","App.js","index.js"],"names":["JoyStick","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","nippleRef","React","createRef","manager","nipplejs","create","mode","catchDistance","color","zone","current","listener","react_default","a","createElement","ref","style","joyStyle","Component","flex","background","robots","App","state","status","robotId","sendDirection","direction","conn","send","concat","on","e","stick","angle","onRobotSelection","setState","_this2","WebSocket","window","location","hostname","onopen","onclose","onerror","_this3","_this$state","containerStyle","display","flexDirection","position","width","height","innerHeight","menuStyle","map","id","onClick","key","margin","Joystick","ReactDOM","render","src_App","document","getElementById"],"mappings":"uLAGMA,cACJ,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACjBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KACDQ,UAAYC,IAAMC,YAFNT,mFAMjBG,KAAKO,QAAUC,IAASC,OAAO,CAC7BC,KAAM,OACNC,cAAe,IACfC,MAAO,OACPC,KAAMb,KAAKI,UAAUU,UAEvBd,KAAKJ,MAAMmB,SAASf,KAAKO,0CAIzB,OAAOS,EAAAC,EAAAC,cAAA,OAAKC,IAAKnB,KAAKI,UAAWgB,MAAOC,WAjBrBC,aAqBjBD,EAAW,CACfE,KAAM,EACNC,WAAY,QAGC7B,ICtBT8B,EAAS,CAAC,EAAG,EAAG,EAAG,GAEnBC,6MACJC,MAAQ,CACNC,OAAQ,aACRC,QAASJ,EAAO,MAoBlBK,cAAgB,SAAAC,GAAa,IACnBF,EAAYhC,EAAK8B,MAAjBE,QACRhC,EAAKmC,KAAKC,KAAV,GAAAC,OAAkBL,EAAlB,KAAAK,OAA6BH,OAG/BhB,SAAW,SAAAR,GACTA,EAAQ4B,GAAG,MAAO,SAACC,EAAGC,GAChBA,EAAMN,WAAaM,EAAMN,UAAUO,OACrCzC,EAAKiC,cAAcO,EAAMN,UAAUO,SAGvC/B,EAAQ4B,GAAG,MAAO,WAChBtC,EAAKiC,cAAc,aAIvBS,iBAAmB,SAAAV,GACjBhC,EAAK2C,SAAS,CAAEX,gGAlCE,IAAAY,EAAAzC,KAElBA,KAAKgC,KAAO,IAAIU,UAAU,QAAUC,OAAOC,SAASC,SAAW,SAG/D7C,KAAKgC,KAAKc,OAAS,WACjBL,EAAKD,SAAS,CAAEZ,OAAQ,eAG1B5B,KAAKgC,KAAKe,QAAU,WAClBN,EAAKD,SAAS,CAAEZ,OAAQ,YAE1B5B,KAAKgC,KAAKgB,QAAU,SAAAZ,GAClBK,EAAKD,SAAS,CAAEZ,OAAQ,4CAwBnB,IAAAqB,EAAAjD,KAAAkD,EACqBlD,KAAK2B,MAAzBC,EADDsB,EACCtB,OAAQC,EADTqB,EACSrB,QAEVsB,EAAiB,CACrBC,QAAS,OACTC,cAAe,SACfC,SAAU,WACVC,MAAO,OACPC,OAAM,GAAAtB,OAAKS,OAAOc,YAAZ,OAGR,OACEzC,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKE,MAAO+B,GACVnC,EAAAC,EAAAC,cAAA,OAAKE,MAAOsC,GAAZ,WACW9B,EACRH,EAAOkC,IAAI,SAAAC,GAAE,OACZ5C,EAAAC,EAAAC,cAAA,UACE2C,QAAS,kBAAMZ,EAAKV,iBAAiBqB,IACrCE,IAAKF,EACLxC,MAAO,CACL2C,OAAQ,MACRnD,MAAOgD,IAAO/B,EAAU,MAAQ,UALpC,SAQS+B,MAID,cAAXhC,GAA0BZ,EAAAC,EAAAC,cAAC8C,EAAD,CAAUjD,SAAUf,KAAKe,oBAxE5CO,aAyFZoC,EAAY,CAChBnC,KAAM,EACNwC,OAAQ,QACRvC,WAAY,QAGCE,ICpGfuC,IAASC,OAAOlD,EAAAC,EAAAC,cAACiD,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.a1c9d23a.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport nipplejs from \"nipplejs\";\n\nclass JoyStick extends Component {\n  constructor(props) {\n    super(props);\n    this.nippleRef = React.createRef();\n  }\n\n  componentDidMount() {\n    this.manager = nipplejs.create({\n      mode: \"semi\",\n      catchDistance: 150,\n      color: \"#fff\",\n      zone: this.nippleRef.current\n    });\n    this.props.listener(this.manager);\n  }\n\n  render() {\n    return <div ref={this.nippleRef} style={joyStyle} />;\n  }\n}\n\nconst joyStyle = {\n  flex: 1,\n  background: \"#000\"\n};\n\nexport default JoyStick;\n","import React, { Component } from \"react\";\nimport nipplejs from \"nipplejs\";\nimport JoyStick from \"./Joystick\";\n\n// keep constant sending speed for webots\nconst SEND_GAP = 300;\n\nconst robots = [0, 1, 2, 3];\n\nclass App extends Component {\n  state = {\n    status: \"connecting\",\n    robotId: robots[0]\n  };\n\n  componentDidMount() {\n    // this.conn = new WebSocket(\"ws://192.168.43.54:9000\");\n    this.conn = new WebSocket(\"ws://\" + window.location.hostname + \":9000\");\n    //this.conn = new WebSocket(\"wss://echo.websocket.org\");\n\n    this.conn.onopen = () => {\n      this.setState({ status: \"connected\" });\n    };\n\n    this.conn.onclose = () => {\n      this.setState({ status: \"closed\" });\n    };\n    this.conn.onerror = e => {\n      this.setState({ status: \"error\" });\n    };\n  }\n\n  sendDirection = direction => {\n    const { robotId } = this.state;\n    this.conn.send(`${robotId}:${direction}`);\n  };\n\n  listener = manager => {\n    manager.on(\"dir\", (e, stick) => {\n      if (stick.direction && stick.direction.angle) {\n        this.sendDirection(stick.direction.angle);\n      }\n    });\n    manager.on(\"end\", () => {\n      this.sendDirection(\"stay\");\n    });\n  };\n\n  onRobotSelection = robotId => {\n    this.setState({ robotId });\n  };\n\n  render() {\n    const { status, robotId } = this.state;\n\n    const containerStyle = {\n      display: \"flex\",\n      flexDirection: \"column\",\n      position: \"relative\",\n      width: \"100%\",\n      height: `${window.innerHeight}px`\n    };\n\n    return (\n      <div>\n        <div style={containerStyle}>\n          <div style={menuStyle}>\n            Status: {status}\n            {robots.map(id => (\n              <button\n                onClick={() => this.onRobotSelection(id)}\n                key={id}\n                style={{\n                  margin: \"1em\",\n                  color: id === robotId ? \"red\" : \"black\"\n                }}\n              >\n                Robot {id}\n              </button>\n            ))}\n          </div>\n          {status === \"connected\" && <JoyStick listener={this.listener} />}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst joyOptions = {\n  mode: \"semi\",\n  catchDistance: 150,\n  color: \"#fff\"\n};\n\nconst joyStyle = {\n  flex: 1\n};\n\nconst menuStyle = {\n  flex: 0,\n  margin: \"0.5em\",\n  background: \"#fff\"\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}